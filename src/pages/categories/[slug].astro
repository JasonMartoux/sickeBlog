---
import Layout from '../../layouts/Layout.astro';
import { getPages } from '../../lib/directus';

export async function getStaticPaths() {
    const pages = {};
    if (!pages || pages.length === 0) {
        // Return at least one path to prevent build error
        return [{
            params: { slug: 'no-pages' },
            props: { 
                page: {
                    title: 'No Pages Found',
                    content: 'No pages are currently available.',
                    mainImg: '',
                    sideImg: '',
                    Category: null
                }
            }
        }];
    }
    return pages.map(page => ({
        params: { slug: page.slug },
        props: { page }
    }));
}

const { page } = Astro.props;
---

<Layout title={page.title}>
    <main class="container mx-auto px-4 py-8">
        <h1 class="text-4xl font-bold mb-6">{page.title}</h1>
        {page.mainImg && (
            <img src={page.mainImg} alt={page.title} class="w-full h-auto mb-6" />
        )}
        <div class="prose max-w-none" set:html={page.content}></div>
    </main>
</Layout>